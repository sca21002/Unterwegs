[% META title = 'Track List' -%]

<script type="text/javascript">
$(document).ready(function() {
    jQuery("#track").jqGrid({
        url : "[% json_url %]",
        datatype : "json",
        colNames : [ 'Id', 'Tour', 'Name', 'Source', 'LÃ¤nge', 'Start', 'Ende' ],
        colModel : [
            {   name  : 'ogc_fid',
                jsonmap: 'properties.ogc_fid',
                width : 15
            },
            {
                name : 'tour',
                jsonmap: 'properties.tour',
                width: 45
            },
            {
                name : 'name',
                jsonmap: 'properties.name',
                width: 120
            },
            {
                name  : 'src',
                jsonmap: 'properties.src',
                width : 60
            },
            {
                name  : 'len',
                jsonmap: 'properties.len',
                formatter: 'number',
                width : 50,
                align : 'right'

            },
            {
                name : 'start',
                jsonmap: 'properties.start',
                width : 90

            },
            {
                name : 'end',
                jsonmap: 'properties.end',
                width: 35
            }
        ],
        rowNum : "10",    
        height : "auto",
        jsonReader: {
            root: "features",
            repeatitems: false
        },
        pager : '#pager_track',
        onSelectRow: function(id){ 
            var rowId = $("#track").getRowData(i);
            alert(getRowData(rowId['name']))
        },
        loadComplete: function(data){
        $.each(data, function(index, value) {
                console.log(index);
        });
        }
             
      });
     function init(){

     var vectorLayer = new ol.layer.Vector({
        source: new ol.source.GeoJSON({
        projection: 'EPSG:3857',
                    object: {
                        "type":"Feature",
        'crs': {
          'type': 'name',
          'properties': {
            'name': 'EPSG:4326'
          }
        },
                        "geometry": {"type":"MultiLineString","coordinates":[[[9.61724197492003,54.6864049974829],[9.61725102737546,54.6864700410515],[9.61725798435509,54.6865739766508],[9.61726200766861,54.6866149641573],[9.6171610057354,54.6866429597139],[9.6170399710536,54.686651006341],[9.61675599217415,54.6866820193827],[9.61648701690137,54.6867260243744],[9.61625399999321,54.686770029366],[9.61625098250806,54.6867690235376],[9.61615903303027,54.6867909841239],[9.61588704027236,54.6868329774588],[9.61560700088739,54.6868860349059],[9.61557799950242,54.6868779882789],[9.61558596231043,54.6868769824505],[9.61558504030108,54.6868759766221],[9.61558504030108,54.6868759766221],[9.61558504030108,54.6868759766221],[9.61557297036052,54.686859967187],[9.61549803614616,54.6866749785841],[9.61543802171946,54.6864899899811],[9.61540600284934,54.6863299794495],[9.61539200507104,54.6862060111016],[9.61537800729275,54.6861979644746],[9.61537599563599,54.6861969586462],[9.61553902365267,54.6861549653113],[9.61565603502095,54.6861289814115],[9.61572200059891,54.6860999800265],[9.61571001447737,54.6860470063984],[9.61567003279924,54.6860340144485],[9.61565796285868,54.6859090402722],[9.61563600227237,54.6858220361173],[9.6158189792186,54.6857969742268],[9.61593397893012,54.6858139894903],[9.61592501029372,54.6857959683985],[9.61592702195048,54.6857930347323],[9.6159209869802,54.685792028904],[9.61591604165733,54.685792028904],[9.61591503582895,54.6858200244606],[9.61592299863696,54.6858210302889],[9.61595501750708,54.6859370358288],[9.61596901528537,54.6859989780933],[9.61596599780023,54.6859999839216],[9.61596599780023,54.68600098975],[9.61596700362861,54.68600098975],[9.61594998836517,54.6859999839216],[9.6159400139004,54.685984980315],[9.6159069892019,54.6859920211136],[9.61586700752378,54.6860030014068],[9.61582995951176,54.685993026942],[9.61579198949039,54.6859989780933],[9.61574697867036,54.6859760116786],[9.61571001447737,54.6859200205654],[9.61573298089206,54.6859279833734],[9.6157690230757,54.6859279833734],[9.61577103473246,54.6859249658883],[9.61576600559056,54.6859220322222],[9.61576600559056,54.6858770214021],[9.6157639939338,54.6858729980886],[9.6157690230757,54.6858910191804],[9.61573700420558,54.68589797616],[9.61573398672044,54.6858959645033],[9.615716971457,54.6858969703317],[9.61567497812212,54.6859660372138],[9.61568503640592,54.6860040072352],[9.6157449670136,54.686075001955],[9.61572702974081,54.6861249580979],[9.61546903476119,54.6861599944532],[9.61531103588641,54.686178015545],[9.61505496874452,54.6862080227584],[9.61476797237992,54.6862139739096],[9.61464702151716,54.6861599944532],[9.61471298709512,54.6860050130635],[9.61476101540029,54.6859230380505],[9.61479404009879,54.6857959683985],[9.61479898542166,54.6857569925487],[9.61482203565538,54.6856750175357],[9.61482396349311,54.6856529731303],[9.61482798680663,54.6855269931257],[9.61484299041331,54.6855079662055],[9.61490501649678,54.6854989975691],[9.61494298651814,54.6854860056192],[9.615080030635,54.6854490414262],[9.61515001952648,54.6854760311544],[9.61538999341428,54.6854600217193],[9.61560901254416,54.6854359656572],[9.6157550252974,54.6854129992425],[9.61594495922327,54.6854059584439],[9.6161300316453,54.6853819862008],[9.61634100414813,54.6853519789875],[9.61656899191439,54.6853209659457],[9.61677703075111,54.6853160206228],[9.61702303960919,54.6854129992425],[9.61703795939684,54.6854269970208],[9.6170589979738,54.6855170186609],[9.61707601323724,54.685638975352],[9.61707903072238,54.6856529731303],[9.61708397604525,54.6857040189207],[9.61709596216679,54.6857750136405],[9.61710702627897,54.6858310047537],[9.61713502183557,54.6859380416572],[9.61715597659349,54.6860979683697],[9.61719302460551,54.6862279716879],[9.61721498519182,54.6862999722362],[9.61720400489867,54.6862950269133]]]}}})});

       var map = new ol.Map({
       target: 'map',
       layers: [
         new ol.layer.Tile({
           source: new ol.source.OSM({
              attributions : [ol.source.OSM.DATA_ATTRIBUTION],        
               url : "http://localhost/tiles/osm-bright/{z}/{x}/{y}.png",
               crossOrigin: null
         })
         }),
         vectorLayer
       ],
       controls: ol.control.defaults({
           attributionOptions: /** @type {olx.control.AttributionOptions} */ ({
               collapsible: false
           })
       }),
       view: new ol.View({
         center: ol.proj.transform([9.61, 54.69], 'EPSG:4326', 'EPSG:3857'),
         zoom: 11
       })
    });     
   }
    init();  
});
</script>
<span id="uw">
<div id="map" class="map" style="width: 400px; height: 300px; border: 1px solid black"></div> 
<table id="track"></table>
<div id="pager_track"></div>
</span>
